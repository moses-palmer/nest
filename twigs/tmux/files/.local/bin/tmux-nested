#!/bin/sh

alias ::='tmux show-option -sv'
alias :='tmux set-option'
case "$1" in
    on)
        bg="$(:: @nested-inactive-bg)"
        current="$(:: @nested-inactive-current)"
        fg="$(:: @nested-inactive-fg)"
        : prefix None
        : key-table off
        : -g status-position bottom
        ;;
    off)
        bg="$(:: @nested-active-bg)"
        current="$(:: @nested-active-current)"
        fg="$(:: @nested-active-fg)"
        : -u prefix
        : -u key-table
        : -g status-position top
        ;;
esac
: -g status-style bg=$bg,fg=$fg
: -g status-left-style fg=$fg,bold
: -g status-right-style fg=$fg,bold
: -wg window-status-current-style fg=$fg,bold,bg=$current
: -wg window-status-style fg=$fg,bold

# Support running this command outside of a client session
tmux refresh-client -S || true
